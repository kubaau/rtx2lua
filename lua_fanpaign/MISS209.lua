-- Generation begin (https://github.com/kubaau/rtx2lua)

-- Original map script: MIS_0009.RTX

rttr:RegisterTranslations(
{
    de =
    {
        Diary   = 'Tagebuch',
        msg0    = 'Heimkehr nach Rom - von Achim Ruziczka\n\nSeit meine Mannen das Tor zerstört haben, sind wir bisher 8 mal von den Göttern auf die Probe gestellt worden!\n\nBisher konnten wir die Prüfungen alle bestehen. Dieses Mal jedoch, so haben es uns die Götter prophezeit, wird es die letzte Prüfung sein. Sollten wir wieder an den Göttern zweifeln, oder gegen Ihren Willen verstoßen, so werden wir ewig in der Welt umherirren müssen - ohne jemals unser geliebtes Rom wieder zu sehen.\nBeachten wir also die Gesetze der Götter, und bringen Ihnen regelmäsig Opfer dar!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n ',
        msgh0   = 'Halte Dich an die Vorgaben der Götter. Meide die "verbotene Insel", sie bringt nur Unglück! Wiederstehe dem dort befindlichen Gold! Steinmetze stehen Dir nicht zur Verfügung, doch fast überall kann unter Tage Granit abgebaut werden.',
        msg2    = 'Ein Hafen ist fertig!\n\nSomit kannst Du Expeditionen mit Schiffen starten!\n\nSei aber vorsichtig und weise, verstoße nicht gegen die Gesetze der Götter. Meide die "verbotene Insel" im Südosten, auf Ihr haben die Götter sämtliches Gold, dieser Welt, gehortet.\nAuch wenn es nicht so scheint, und die Insel mit all dem Gold unbewacht ist, die Götter werden es bemerken, und die Frevler für immer in der Welt umherirren lassen!\nDu wirst zu spät bemerken, womit Dich die Götter bestrafen! Doch dann wird es zu spät sein!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh2   = 'Meide die Insel der Götter, obwohl sie nur aus Gold besteht und unbewacht ist, alleine das betreten wird mit ewiger Verbannung bestraft!',
        msg4    = 'Letzte Warnung der Götter!\n\nMEIDE DIE VERBOTENE INSEL!!\n\nUnheil kommt über die, die sie betreten! Auch wenn es nicht so scheint, die Götter sind wachsam, und Ihr Zorn wird die Ungläubigen treffen.\n\nSegle weiter, ohne die Insel zu betreten! Noch hast Du die Möglichkeit dazu, die Götter haben Deine Anwesenheit noch nicht bemerkt! \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh4   = 'Nehme die Warnungen ernst!\n\nLasse Dich von dem vielen unbewachten Gold nicht verleiten. Zu leicht ist die Beute, als daß sie ungerächt bliebe!',
        msg6    = 'Die verbotene Insel!\n\nAllen Warnungen zum Trotz hast Du sie betreten!\n\nDie Strafe der Götter ist somit unausweichlich!\n\nSpät, viel zu spät wirst Du bemerken, welchen Fehler Du begangen hast!\n\nNachdem Du die Götter wieder herausgefordert hast, nutze das auf der Insel vorhandenen Gold sinnvoll!\n\nMit viel, viel Glück, kannst Du auch gegen den Zorn der Götter bestehen!\nViel Hoffnung hast du aber nicht!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh6   = 'Auf der Insel gibt es fast unendlich viel Gold!\nVerschwende nichts - wer sich mit den Göttern anlegt, braucht riesige Reserven!\nDen direkten Weg nach Rom haben Dir die Götter verbaut, suche nach Alternativen! ',
        msg8    = 'Hätten wir doch bloß auf die Warnungen gehört!\nUnmittelbar vor Rom stehend, müssen wir erkennen, daß die Götter uns die Heimkehr versagen.\nDas Tor - einst ein Zeichen göttlichen Wohlgefallens und Zuversicht - verbaut uns den Zugang!\nNoch besteht Hoffnung - eine schmale Gasse führt nach Süden - doch die Legionen der Götter werden uns im Wege stehen.\nEin Kampf ist unausweichlich, wenn überhaupt, werden nur wenige von uns nach Rom zurückkehren!\n\n\n\n\n\n\n\n\n\n',
        msgh8   = 'Es beginnt ein ungleicher Kampf!\nSein Ende ist schon von den Göttern niedergeschrieben. Die Gebeine von Dir, und Deinen Mannen, wird die Sonne verbrennen, und der Wind wird die Asche verteilen! Das Los aller Frevler!',
        msg10   = 'Unnützes Gebäude erbaut!\n\nDie Götter haben Dir sowohl den Steinmetz als auch den Schlosser verwehrt. Die Gebäude kannst Du sicherlich bauen, Doch werden sie auf immer unbesetzt bleiben.\n\nWerkzeuge haben Dir die Götter genügend mitgegeben, und Granit ist überall unter Tage vorhanden. Es besteht also keine Notwendigkeit den beiden fehlenden Häusertypen nachzutrauern - sofern Du dich an die Vorgaben der Götter hälst!\n\nSelbst beim aktivieren der "Cheats" werden die Gebäude nicht besetzt. \nAuch die Götter sind lernfähig!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh10  = 'Verschwende nicht Deine Zeit und Dein Baumaterial zum Bau von:\n- Schlosserei\n- Steinmetzhütte\nDu hast sicherlich sinnvolleres zu tuen! ',
        msg12   = 'Begehe keine Freveltaten!\n\nNur wer die "verbotene Insel" betritt findet Gold.\nGoldbergwerk und Münzprägerei machen nur mit Gold einen Sinn!\nDoch die Götter dulden keine Frevler auf "Ihrer" Insel.\n\nWer Trotz aller Wahrnung die Insel der Götter betritt, wird Rom nie erreichen. Die Sonne wird die Gebeine verbrennen, und der Wind wird die Asche verstreuen. Auf ewig bist Du und Deine Mannen dann von Rom verbannt.\n\nSo bestrafen die Götter die Frevler!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh12  = 'Meide die verbotene Insel es ist die"Insel der Götter"\nWähne Dich nicht in Sicherheit, nur weil die Insel unbewacht ist.  Die Götter haben andere Möglichkeiten Dich zu bestrafen - fordere sie nicht heraus!',
        msg14   = 'Rom!\n\nLange mußten wir auf diesen Anblick warten! Nun endlich ist es so weit! Wir alle sind froh darüber!\n       -/-  -/-  -/-  -/-  -/-  -/-  -/-\nIm Namen aller Beteiligten möchte ich mich an dieser Stelle für das Spielen der 10 Missionen bedanken.\nAn dieser Stelle nochmals Dank an: Astrid, Heiko, Ralf, Thomas und Wolfgang, für das Erstellen der Karten.\nEckard für die allgemeine Unterstützung.\nJürgen Nagel für das Bereitstellen der Tools. \n\nAchim Ruziczka\nInitiator und Bearbeiter\n\n\n\n\n\n\n\n\n\n',
        msgh14  = 'Welch ein Frage - erstelle eine eigene Kampagne!\nBei Fragen und Anregungen:\nFANpaign[at]aol.com\nStuttgart, den 26.06.1999',
    },
    en =
    {
        Diary   = 'Diary',
        msg0    = "Return to Rome\nMission by Achim Ruziczka\n\nSince my men devastated The Arc, the Gods have afflicted us eight times!\n\nUntil now we were able to pass all examinations. This one the Gods promised to be the last trial. If, however, we should again fall into doubt or fail to obey their will, we shall roam this world for ever - never to see our beloved Rome again.\n\nTherefore, let's obey their laws and offer to them regularly!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n ",
        msgh0   = 'Obey the commandments of the Gods. Avoid the "Forbidden Island", as it will bring only mischief! Withstand the gold that abounds there! Stonemasons you will \nhave not, but stones can be \nmined for almost everywhere.',
        msg2    = 'A harbour is ready!\n\nNow we can start expeditions with ships!\n\nBut we must be careful and prudent, and not disobey the laws of the Gods. We have to avoid the "Forbidden Island" in the Southeast, where the Gods heaped up all the gold in this world.\nEven if it isn\'t obvious and the island is unguarded, the Gods will notice it and punish the offender cursing him to wander endlessly on this world!\nFinally he will notice, how the Gods will punish him! But it will be too late for remorse then.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh2   = 'Avoid the island of the Gods, although it consists of gold and is unguarded - Even to set foot on it will be punished with an eternal ban!',
        msg4    = "Last warning of the Gods!\n\nSTAY AWAY FROM THE FORBIDDEN ISLAND!!\n\nEvil will befall those who set foot on it! Even if it doesn't seem so, the Gods are vigilant and their wrath will affect the transgressor.\n\nSail on without setting foot while you are able to! Yet the Gods haven't noticed your presence, yet you have a chance to escape a dreadful fate!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        msgh4   = "Take this warning seriously!\nDon't let yourself be lured by that much unguarded gold! This is too easy a booty to be taken unrevenged!",
        msg6    = "The Forbidden Island!\n\nIn spite of all warnings you have desecrated it!\n\nUninevitable therefore will be your punishment by the Gods!\n\nLate, much too late you will find out, what blunder you have committed!\n\nHaving defied the Gods themselves again, make good use of the gold you'll find on this island!\n\nWith luck, much luck, you may even defeat the wrath of Gods! However, there is but little hope!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        msgh6   = "On this island there is gold almost without end.\nDon't squander it - he who dares the Gods needs immensurable reserves!\nThe direct way to Rome the Gods have blocked for you. Search for alternatives! ",
        msg8    = 'If only we would have listened to the warnings!\nStanding in sight of Rome, we have to realise, that the Gods deny to us our homecoming.\n\nThe Arc - once a sign of godly pleasure and mercy - is blocking the access!\n\nThere is hope still - a narrow trail leads to the South - but the legions of the Gods will stand in our way.\n\nFighting is inevitable.  If at all, only a few of us will ever return to Rome!\n\n\n\n\n\n\n\n\n\n',
        msgh8   = "An uneven fight breaks loose.\nIt's outcome is already predestined by the Gods. Your and your men's bones will be burned by the sun, and the wind will disperse the ashes - thus the fate of all offenders!",
        msg10   = 'You have built an useless building\n\nThe Gods have denied you a stonemason as well as a toolmaker. Certainly, you may build these buildings. But they will remain unoccupied forever.\n\nThe Gods have given you enough tools, and stones can be mined for everywhere. There is no necessity to mourn for the missing buildings - as long as you obey the biddings of the Gods!\n\nEven when activating Cheats, the buildings will remain empty.\nGods get wise after all, too!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh10  = "Don't waste time and material to build:\n- Toolmaker\n- Stonemasonry\nYou definitely have more sensible things to do! ",
        msg12   = 'Don\'t commit outrages!\n\nGold can be found on the "Forbidden Island" only.\nGoldmine and mint make sense only when you have gold!\nBut the Gods don\'t tolerate mortals on "their" island.\n\nWho defies all warnings and enters the island of the Gods will never reach Rome. The sun will burn his bones and the wind will disperse the ashes. Forever you and your men will then be banned from Rome.\n\nThus the Gods will punish the offender!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n',
        msgh12  = 'Stay away from the "Forbidden Island". It is the island of the Gods!\nDon\'t believe youre safe, just because the Island is unguarded. The Gods have ways to punish you - don\'t you dare them! ',
        msg14   = 'Rome!\n\nLong time we had to wait to see this sight! Now finally we are home! How glad we are!!\n     -/-  -/-  -/-  -/-  -/-  -/-  -/-\nOn behalf of all involved I like to thank you now for playing these 10 missions.\nAgain here my thanks to: Astrid, Heiko, Ralf, Thomas, and Wolfgang, for the composition of the maps.\nEckard for his general support.\nJürgen Nagel for supplying the tools. \n\nAchim Ruziczka\nInitiator and Editor\n\n\n\n\n\n\n\n\n\n',
        msgh14  = 'What a question! - go ahead and set up your own campaign!\nFor questions and suggestions:\nFANpaign[at]aol.com\nStuttgart, June 26, 1999',
    },
})

function getNumPlayers()
    return 7
end

-- boilerplate begin
function getRequiredLuaVersion()
    return 1
end

function isMapPreviewEnabled()
    return false
end

local requiredFeature = 4
function checkVersion()
    local featureLevel = rttr:GetFeatureLevel()
    if featureLevel < requiredFeature then
        rttr:MsgBox("LUA-Version Error", "Your Return to the Roots version is outdated. The required LUA-Feature level is " .. requiredFeature .. ", your version is " .. featureLevel .. ". The script can possibly crash or run unexpectedly!\n\nPlease update the game!", true)
    end
end

local isLoading = false
function showMissionText(e)
    if isLoading then return end

    local msg = _('msg' .. tostring(e))

    if msg ~= ('msg' .. tostring(e)) then
        local msgh = _('msgh' .. tostring(e))
        if msgh ~= ('msgh'.. tostring(e)) then
            rttr:MissionStatement(0, _('Diary'), msg .. '\n\n\n\n' .. msgh)
            rttr:SetMissionGoal(0, msgh)
        else
            rttr:MissionStatement(0, _('Diary'), msg)
        end
    else
        rttr:Log("Error: no Translation found: " .. msg)
    end
end

function enableBuilding(b)
    rttr:GetPlayer(0):EnableBuilding(b, not isLoading)
end

function getAllowedChanges()
    return
    {
        ["addonsAll"]   = false,
        ["ownNation"]   = false,
        ["ownColor"]    = false,
        ["ownTeam"]     = false,
        ["aiNation"]    = false,
        ["aiColor"]     = false,
        ["aiTeam"]      = false,
    }
end

local activeEvents = {}
local eventHistory = {}
local timesTriggered = {}

function onSave(saveGame)
    saveGame:PushInt(#eventHistory)
    for i = 1, #eventHistory do
        saveGame:PushInt(eventHistory[i])
    end
    return true
end

function onLoad(saveGame)
    local n = saveGame:PopInt()
    for i = 1, n do
        eventHistory[i] = saveGame:PopInt()
    end
    return true
end

function onSettingsReady()
    checkVersion()
    rttr:Log("-----------------------\n lua loaded... \n-----------------------\n")
    rttr:ResetAddons()
    rttr:SetAddon(ADDON_CATAPULTS_ATTACK_ALLIES, true)
    rttr:SetAddon(ADDON_FRONTIER_DISTANCE_REACHABLE, true)
    rttr:SetGameSettings({
        ["fow"] = EXP_CLASSIC,
        ["teamView"] = false,
        ["lockedTeams"] = false
    })

    rttr:GetPlayer(0):SetNation(NAT_ROMANS)
    rttr:GetPlayer(0):SetColor(0)
-- boilerplate end

    rttr:GetPlayer(1):SetAI(3)
    rttr:GetPlayer(1):SetColor(1)
    rttr:GetPlayer(1):SetNation(NAT_VIKINGS)
    rttr:GetPlayer(1):SetName('Erik')
 -- rttr:GetPlayer(1):SetPortrait(3)

    rttr:GetPlayer(2):SetAI(3)
    rttr:GetPlayer(2):SetColor(2)
    rttr:GetPlayer(2):SetNation(NAT_VIKINGS)
    rttr:GetPlayer(2):SetName('Knut')
 -- rttr:GetPlayer(2):SetPortrait(4)

    rttr:GetPlayer(3):SetAI(3)
    rttr:GetPlayer(3):SetColor(3)
    rttr:GetPlayer(3):SetNation(NAT_JAPANESE)
    rttr:GetPlayer(3):SetName('Hakirawashi')
 -- rttr:GetPlayer(3):SetPortrait(8)

    rttr:GetPlayer(4):SetAI(3)
    rttr:GetPlayer(4):SetColor(4)
    rttr:GetPlayer(4):SetNation(NAT_AFRICANS)
    rttr:GetPlayer(4):SetName('Shaka')
 -- rttr:GetPlayer(4):SetPortrait(9)

    rttr:GetPlayer(5):SetAI(3)
    rttr:GetPlayer(5):SetColor(5)
    rttr:GetPlayer(5):SetNation(NAT_ROMANS)
    rttr:GetPlayer(5):SetName('Julius')
 -- rttr:GetPlayer(5):SetPortrait(1)

    rttr:GetPlayer(6):SetAI(3)
    rttr:GetPlayer(6):SetColor(6)
    rttr:GetPlayer(6):SetNation(NAT_ROMANS)
    rttr:GetPlayer(6):SetName('Brutus')
 -- rttr:GetPlayer(6):SetPortrait(2)
end

function onStart(isFirstStart)
    -- world always commands
    rttr:GetWorld():SetComputerBarrier(11, 77, 21)
    rttr:GetWorld():SetComputerBarrier(12, 70, 90)
    rttr:GetWorld():SetComputerBarrier(12, 38, 120)
    rttr:GetWorld():SetComputerBarrier(18, 178, 43)
    rttr:GetWorld():SetComputerBarrier(6, 162, 52)
    rttr:GetWorld():SetComputerBarrier(15, 135, 32)
    rttr:GetWorld():SetComputerBarrier(15, 135, 22)
    rttr:GetWorld():SetComputerBarrier(15, 135, 12)
    rttr:GetWorld():SetComputerBarrier(12, 50, 40)
    rttr:GetWorld():SetComputerBarrier(12, 88, 55)

    -- player 0 always commands
    rttr:GetPlayer(0):DisableAllBuildings()
    rttr:GetPlayer(0):EnableAllBuildings()

    -- player 1 always commands
    rttr:GetPlayer(1):EnableAllBuildings()

    -- player 2 always commands
    rttr:GetPlayer(2):EnableAllBuildings()

    -- player 3 always commands
    rttr:GetPlayer(3):EnableAllBuildings()

    -- player 4 always commands
    rttr:GetPlayer(4):EnableAllBuildings()

    -- player 5 always commands
    rttr:GetPlayer(5):EnableAllBuildings()

    -- player 6 always commands
    rttr:GetPlayer(6):EnableAllBuildings()

    -- events which need to be triggered multiple times

    -- events which are active right from the start
    activeEvents[ 0] = true
    activeEvents[ 1] = true
    activeEvents[ 2] = true
    activeEvents[ 5] = true
    activeEvents[ 6] = true
    activeEvents[ 7] = true
    activeEvents[ 8] = true
    activeEvents[ 9] = true
    activeEvents[20] = true
    activeEvents[21] = true
    activeEvents[23] = true
    activeEvents[24] = true
    activeEvents[30] = true
    activeEvents[50] = true
    activeEvents[96] = true
    activeEvents[99] = true

    if isFirstStart then
        -- world firststart commands

        -- player 0 firststart commands
        rttr:GetPlayer(0):MakeOneSidedAllianceTo(5)
        rttr:GetPlayer(0):MakeOneSidedAllianceTo(6)
        rttr:GetPlayer(0):PlaceHQ(60, 90)
        rttr:GetPlayer(0):ClearResources()

        -- player 1 firststart commands
        rttr:GetPlayer(1):MakeOneSidedAllianceTo(2)
        rttr:GetPlayer(1):PlaceHQ(100, 80)
        rttr:GetPlayer(1):AIConstructionOrder(106, 80, BLD_GUARDHOUSE)
        rttr:GetPlayer(1):AIConstructionOrder(97, 86, BLD_FORTRESS)
        rttr:GetPlayer(1):ClearResources()

        -- player 2 firststart commands
        rttr:GetPlayer(2):MakeOneSidedAllianceTo(1)
        rttr:GetPlayer(2):MakeOneSidedAllianceTo(3)
        rttr:GetPlayer(2):MakeOneSidedAllianceTo(4)
        rttr:GetPlayer(2):PlaceHQ(16, 72)
        rttr:GetPlayer(2):AIConstructionOrder(20, 68, BLD_FORTRESS)
        rttr:GetPlayer(2):ClearResources()

        -- player 3 firststart commands
        rttr:GetPlayer(3):MakeOneSidedAllianceTo(2)
        rttr:GetPlayer(3):MakeOneSidedAllianceTo(4)
        rttr:GetPlayer(3):PlaceHQ(20, 20)
        rttr:GetPlayer(3):AIConstructionOrder(26, 18, BLD_WATCHTOWER)
        rttr:GetPlayer(3):AIConstructionOrder(17, 26, BLD_WATCHTOWER)
        rttr:GetPlayer(3):ClearResources()

        -- player 4 firststart commands
        rttr:GetPlayer(4):MakeOneSidedAllianceTo(3)
        rttr:GetPlayer(4):MakeOneSidedAllianceTo(2)
        rttr:GetPlayer(4):MakeOneSidedAllianceTo(6)
        rttr:GetPlayer(4):MakeOneSidedAllianceTo(5)
        rttr:GetPlayer(4):PlaceHQ(102, 11)
        rttr:GetPlayer(4):AIConstructionOrder(107, 12, BLD_GUARDHOUSE)
        rttr:GetPlayer(4):AIConstructionOrder(94, 11, BLD_GUARDHOUSE)
        rttr:GetPlayer(4):ClearResources()

        -- player 5 firststart commands
        rttr:GetPlayer(5):MakeOneSidedAllianceTo(6)
        rttr:GetPlayer(5):MakeOneSidedAllianceTo(0)
        rttr:GetPlayer(5):MakeOneSidedAllianceTo(4)
        rttr:GetPlayer(5):PlaceHQ(156, 31)
        rttr:GetPlayer(5):AIConstructionOrder(151, 31, BLD_WATCHTOWER)
        rttr:GetPlayer(5):AIConstructionOrder(153, 38, BLD_FORTRESS)
        rttr:GetPlayer(5):AIConstructionOrder(153, 24, BLD_FORTRESS)
        rttr:GetPlayer(5):AIConstructionOrder(159, 25, BLD_FORTRESS)
        rttr:GetPlayer(5):AIConstructionOrder(162, 31, BLD_FORTRESS)
        rttr:GetPlayer(5):AIConstructionOrder(159, 36, BLD_FORTRESS)
        rttr:GetPlayer(5):ClearResources()

        -- player 6 firststart commands
        rttr:GetPlayer(6):MakeOneSidedAllianceTo(5)
        rttr:GetPlayer(6):MakeOneSidedAllianceTo(0)
        rttr:GetPlayer(6):MakeOneSidedAllianceTo(4)
        rttr:GetPlayer(6):PlaceHQ(150, 67)
        rttr:GetPlayer(6):AIConstructionOrder(154, 60, BLD_FORTRESS)
        rttr:GetPlayer(6):AIConstructionOrder(147, 61, BLD_FORTRESS)
        rttr:GetPlayer(6):AIConstructionOrder(144, 67, BLD_FORTRESS)
        rttr:GetPlayer(6):AIConstructionOrder(149, 73, BLD_FORTRESS)
        rttr:GetPlayer(6):ClearResources()

        -- player 0 wares
        rttr:GetPlayer(0):AddWares({
            [GD_WOOD      ] = 100,
            [GD_BOARDS    ] = 60,
            [GD_STONES    ] = 100,
            [GD_MEAT      ] = 20,
            [GD_GRAIN     ] = 20,
            [GD_FLOUR     ] = 20,
            [GD_FISH      ] = 20,
            [GD_HAM       ] = 20,
            [GD_BREAD     ] = 20,
            [GD_WATER     ] = 20,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 20,
            [GD_IRONORE   ] = 20,
            [GD_GOLD      ] = 0,
            [GD_IRON      ] = 50,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 10,
            [GD_SAW       ] = 10,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 10,
            [GD_SHOVEL    ] = 10,
            [GD_CRUCIBLE  ] = 10,
            [GD_RODANDLINE] = 10,
            [GD_SCYTHE    ] = 10,
            [GD_CLEAVER   ] = 10,
            [GD_ROLLINGPIN] = 10,
            [GD_BOW       ] = 10,
            [GD_SWORD     ] = 50,
            [GD_SHIELD    ] = 50,
            [GD_BOAT      ] = 10,
        })

        -- player 1 wares
        rttr:GetPlayer(1):AddWares({
            [GD_WOOD      ] = 100,
            [GD_BOARDS    ] = 50,
            [GD_STONES    ] = 100,
            [GD_MEAT      ] = 40,
            [GD_GRAIN     ] = 40,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 150,
            [GD_IRONORE   ] = 0,
            [GD_GOLD      ] = 100,
            [GD_IRON      ] = 100,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 0,
        })

        -- player 2 wares
        rttr:GetPlayer(2):AddWares({
            [GD_WOOD      ] = 70,
            [GD_BOARDS    ] = 50,
            [GD_STONES    ] = 70,
            [GD_MEAT      ] = 30,
            [GD_GRAIN     ] = 30,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 10,
            [GD_IRONORE   ] = 10,
            [GD_GOLD      ] = 70,
            [GD_IRON      ] = 10,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 10,
        })

        -- player 3 wares
        rttr:GetPlayer(3):AddWares({
            [GD_WOOD      ] = 70,
            [GD_BOARDS    ] = 70,
            [GD_STONES    ] = 70,
            [GD_MEAT      ] = 30,
            [GD_GRAIN     ] = 30,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 100,
            [GD_IRONORE   ] = 10,
            [GD_GOLD      ] = 20,
            [GD_IRON      ] = 10,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 0,
        })

        -- player 4 wares
        rttr:GetPlayer(4):AddWares({
            [GD_WOOD      ] = 40,
            [GD_BOARDS    ] = 40,
            [GD_STONES    ] = 40,
            [GD_MEAT      ] = 50,
            [GD_GRAIN     ] = 50,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 10,
            [GD_IRONORE   ] = 10,
            [GD_GOLD      ] = 50,
            [GD_IRON      ] = 10,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 0,
        })

        -- player 5 wares
        rttr:GetPlayer(5):AddWares({
            [GD_WOOD      ] = 70,
            [GD_BOARDS    ] = 70,
            [GD_STONES    ] = 200,
            [GD_MEAT      ] = 10,
            [GD_GRAIN     ] = 10,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 10,
            [GD_IRONORE   ] = 10,
            [GD_GOLD      ] = 70,
            [GD_IRON      ] = 10,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 0,
        })

        -- player 6 wares
        rttr:GetPlayer(6):AddWares({
            [GD_WOOD      ] = 70,
            [GD_BOARDS    ] = 70,
            [GD_STONES    ] = 200,
            [GD_MEAT      ] = 10,
            [GD_GRAIN     ] = 10,
            [GD_FLOUR     ] = 0,
            [GD_FISH      ] = 10,
            [GD_HAM       ] = 10,
            [GD_BREAD     ] = 10,
            [GD_WATER     ] = 10,
            [GD_BEER      ] = 0,
            [GD_COAL      ] = 100,
            [GD_IRONORE   ] = 10,
            [GD_GOLD      ] = 70,
            [GD_IRON      ] = 10,
            [GD_COINS     ] = 0,
            [GD_TONGS     ] = 0,
            [GD_AXE       ] = 0,
            [GD_SAW       ] = 0,
            [GD_PICKAXE   ] = 0,
            [GD_HAMMER    ] = 0,
            [GD_SHOVEL    ] = 0,
            [GD_CRUCIBLE  ] = 0,
            [GD_RODANDLINE] = 0,
            [GD_SCYTHE    ] = 0,
            [GD_CLEAVER   ] = 0,
            [GD_ROLLINGPIN] = 0,
            [GD_BOW       ] = 0,
            [GD_SWORD     ] = 0,
            [GD_SHIELD    ] = 0,
            [GD_BOAT      ] = 10,
        })

        -- player 0 people
        rttr:GetPlayer(0):AddPeople({
            [JOB_HELPER           ] = 100,
            [JOB_WOODCUTTER       ] = 20,
            [JOB_FISHER           ] = 20,
            [JOB_FORESTER         ] = 20,
            [JOB_CARPENTER        ] = 20,
            [JOB_STONEMASON       ] = 0,
            [JOB_HUNTER           ] = 20,
            [JOB_FARMER           ] = 20,
            [JOB_MILLER           ] = 20,
            [JOB_BAKER            ] = 20,
            [JOB_BUTCHER          ] = 20,
            [JOB_MINER            ] = 20,
            [JOB_BREWER           ] = 20,
            [JOB_PIGBREEDER       ] = 20,
            [JOB_DONKEYBREEDER    ] = 20,
            [JOB_IRONFOUNDER      ] = 20,
            [JOB_MINTER           ] = 20,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 20,
            [JOB_BUILDER          ] = 20,
            [JOB_PLANER           ] = 20,
            [JOB_GEOLOGIST        ] = 20,
            [JOB_PRIVATE          ] = 60,
            [JOB_PRIVATEFIRSTCLASS] = 40,
            [JOB_SERGEANT         ] = 15,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 0,
            [JOB_SCOUT            ] = 20,
            [JOB_SHIPWRIGHT       ] = 20,
            [JOB_PACKDONKEY       ] = 0,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 1 people
        rttr:GetPlayer(1):AddPeople({
            [JOB_HELPER           ] = 20,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 15,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 15,
            [JOB_PLANER           ] = 15,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 50,
            [JOB_PRIVATEFIRSTCLASS] = 0,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 30,
            [JOB_SCOUT            ] = 10,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 2 people
        rttr:GetPlayer(2):AddPeople({
            [JOB_HELPER           ] = 20,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 15,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 5,
            [JOB_PLANER           ] = 5,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 50,
            [JOB_PRIVATEFIRSTCLASS] = 0,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 30,
            [JOB_SCOUT            ] = 10,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 3 people
        rttr:GetPlayer(3):AddPeople({
            [JOB_HELPER           ] = 20,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 15,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 5,
            [JOB_PLANER           ] = 5,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 100,
            [JOB_PRIVATEFIRSTCLASS] = 15,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 0,
            [JOB_SCOUT            ] = 0,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 4 people
        rttr:GetPlayer(4):AddPeople({
            [JOB_HELPER           ] = 5,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 15,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 2,
            [JOB_PLANER           ] = 1,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 70,
            [JOB_PRIVATEFIRSTCLASS] = 0,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 0,
            [JOB_SCOUT            ] = 10,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 5 people
        rttr:GetPlayer(5):AddPeople({
            [JOB_HELPER           ] = 100,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 0,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 15,
            [JOB_PLANER           ] = 15,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 20,
            [JOB_PRIVATEFIRSTCLASS] = 0,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 50,
            [JOB_SCOUT            ] = 10,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- player 6 people
        rttr:GetPlayer(6):AddPeople({
            [JOB_HELPER           ] = 100,
            [JOB_WOODCUTTER       ] = 15,
            [JOB_FISHER           ] = 15,
            [JOB_FORESTER         ] = 15,
            [JOB_CARPENTER        ] = 15,
            [JOB_STONEMASON       ] = 0,
            [JOB_HUNTER           ] = 15,
            [JOB_FARMER           ] = 15,
            [JOB_MILLER           ] = 15,
            [JOB_BAKER            ] = 15,
            [JOB_BUTCHER          ] = 15,
            [JOB_MINER            ] = 15,
            [JOB_BREWER           ] = 15,
            [JOB_PIGBREEDER       ] = 15,
            [JOB_DONKEYBREEDER    ] = 15,
            [JOB_IRONFOUNDER      ] = 15,
            [JOB_MINTER           ] = 15,
            [JOB_METALWORKER      ] = 0,
            [JOB_ARMORER          ] = 15,
            [JOB_BUILDER          ] = 15,
            [JOB_PLANER           ] = 15,
            [JOB_GEOLOGIST        ] = 10,
            [JOB_PRIVATE          ] = 0,
            [JOB_PRIVATEFIRSTCLASS] = 0,
            [JOB_SERGEANT         ] = 0,
            [JOB_OFFICER          ] = 0,
            [JOB_GENERAL          ] = 80,
            [JOB_SCOUT            ] = 10,
            [JOB_SHIPWRIGHT       ] = 0,
            [JOB_PACKDONKEY       ] = 100,
            [JOB_BOATCARRIER      ] = 0,
            [JOB_CHARBURNER       ] = 0,
        })

        -- events which are triggered right from the start
        triggerEndEvent(0, 0)
    else
        isLoading = true
        for i = 1, #eventHistory, 2 do
            triggerEndEvent(eventHistory[i], eventHistory[i + 1])
        end
        isLoading = false
    end
end

function triggerEndEvent(e, trigger) -- events triggered from other events
    if not activeEvents[e] then return end

    if timesTriggered[e] then timesTriggered[e] = timesTriggered[e] + 1 end

    if false then -- dummy if
    elseif e == 0 then
        showMissionText(0)
    elseif e == 10 then
        activeEvents[11] = true
        showMissionText(6)
    elseif e == 50 then
        rttr:GetWorld():AddStaticObject(135, 22, 560, 0xFFFF, 2)
    elseif e == 96 then
        activeEvents[97] = true
        showMissionText(6)
    elseif e == 97 then
        rttr:GetWorld():AddStaticObject(140, 28, 561, 0xFFFF, 2)
    elseif e == 98 then
        rttr:GetWorld():AddStaticObject(135, 22, 561, 0xFFFF, 2)
    elseif e == 99 then
        activeEvents[98] = true
        showMissionText(14)
        rttr:SetCampaignChapterCompleted('fanpaign', 10)
        rttr:SetCampaignCompleted('fanpaign')
    end

    if not isLoading then
        local n = #eventHistory
        eventHistory[n + 1] = e
        eventHistory[n + 2] = trigger
    end

    activeEvents[trigger] = false
end

function onGameFrame(gf)
    if activeEvents[1] and rttr:GetPlayer(0):GetBuildingCount(BLD_HARBORBUILDING) >= 1 then
        showMissionText(2)
        triggerEndEvent(1, 1)
    end
    if activeEvents[5] and rttr:GetPlayer(0):GetBuildingCount(BLD_QUARRY) >= 1 then
        showMissionText(10)
        triggerEndEvent(5, 5)
    end
    if activeEvents[6] and rttr:GetPlayer(0):GetBuildingCount(BLD_METALWORKS) >= 1 then
        showMissionText(10)
        triggerEndEvent(6, 6)
    end
    if activeEvents[7] and rttr:GetPlayer(0):GetBuildingCount(BLD_MINT) >= 1 then
        showMissionText(12)
        triggerEndEvent(7, 7)
    end
    if activeEvents[8] and rttr:GetPlayer(0):GetBuildingCount(BLD_GOLDMINE) >= 1 then
        showMissionText(12)
        triggerEndEvent(8, 8)
    end
    if activeEvents[50] then
        triggerEndEvent(50, 50)
    end
    if activeEvents[97] then
        triggerEndEvent(97, 97)
    end
    if activeEvents[98] then
        triggerEndEvent(98, 98)
    end
end

function onExplored(p, x, y, o)
    if false then -- dummy if for onContact cases
    end

    if p ~= 0 then return
    elseif activeEvents[2] and x == 145 and y == 110 then
        showMissionText(4)
        triggerEndEvent(2, 2)
    end
end

function onOccupied(p, x, y)
    if p ~= 0 then return
    elseif activeEvents[11] and x == 140 and y == 28 then
        showMissionText(8)
        triggerEndEvent(11, 11)
    elseif activeEvents[20] and x == 145 and y == 110 then
        triggerEndEvent(20, 20)
        triggerEndEvent(96, 20)
    elseif activeEvents[25] and x == 147 and y == 112 then
        triggerEndEvent(25, 25)
        triggerEndEvent(10, 25)
    elseif activeEvents[30] and x == 135 and y == 22 then
        triggerEndEvent(30, 30)
        triggerEndEvent(99, 30)
    end
end

function onResourceFound(p, x, y, r, q)
    if p ~= 0 then return
    elseif activeEvents[ 9] and r == RES_GOLD then
        showMissionText(12)
        triggerEndEvent(9, 9)
    end
end

-- Generation end
